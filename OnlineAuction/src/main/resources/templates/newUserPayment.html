<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="ISO-8859-1">
        <title>Sign Up!</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
            crossorigin="anonymous">
            
        <link th:href="@{/styles/button.css}" rel="stylesheet"/>
        <link th:href="@{/styles/centering_styles.css}" rel="stylesheet"/>
        <link th:href="@{/styles/wrapper.css}" rel="stylesheet"/>
        <link th:href="@{/styles/signup.css}" rel="stylesheet"/>
        <link th:href="@{/styles/employee_page.css}" rel="stylesheet"/>
        <link th:href="@{/styles/landing.css}" rel="stylesheet"/>
        <link th:href="@{/styles/userDetails.css}" rel="stylesheet"/>
        
        <!-- font import -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
        
        <link href='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css'>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js'></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        
        <style>
            th {
            border: 1px solid rgb(173, 210, 252);
            background-color: #e9ecef;
            }
            tr {
            border: 1px solid rgb(173, 210, 252);
            padding: 15px;
            }
            table {
            padding: 15px;
            margin: 50px;
            border-spacing: 0 15px;
            border-collapse: seperate;
            }
        </style>
    </head>
    <body style="background-color: white">
        <div class="card-header d-flex flex-column align-items-center justify-content-center mb-5">
            <h1 style="font-family: 'Poppins'">Sign Up</h1>
        </div>
        <!-- payment method -->
        <form method="post" action="#" class="row g-3 d-flex justify-content-center my-2"
            th:action="@{/submitPurchaseSignup}" object="${paymentDetails}">
            <!--<div th:if="${relogin == false}">-->
            <div class="modal-body">
                <table style="width:20vw; justify-content:center; margin-left:auto; margin-right:auto;" class="uniTableForm">
                    <thead>
                        <tr>
                            <td colspan="3" style="background-color: #D3D3D3;">
                                <h2>Payment Method</h2>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="background-color: #89CFF0" colspan="3"><label for="cardType" class="form-label">Card Type</label></td>
                        </tr>
                        <tr>
                            <td colspan="3">
								<select class="form-select" id="cardType" name="cardType">
									<option
										th:each="cardType : ${cardTypes}"
										th:value="${cardType.cardType}"
										th:text="${cardType.cardType}">
									</option>
								</select>
							</td>
                        </tr>
                        <tr>
                            <td colspan="3" style="background-color: #89CFF0"><label for="cardholderName" class="form-label">Cardholder Name</label></td>
                        </tr>
                        <tr>
                            <td colspan="3"><input type="text" class="form-control" field="*{cardholderName}" name="cardholderName"></input>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="background-color: #89CFF0"><label for="cardNumber" class="form-label">Card Number</label></td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <input type="number" class="form-control" field="*{cardNumber}" name="cardNumber"></input>
                                <p th:text="${cardNumberErr}" th:if="${cardNumberErr != null}"></p>
                            </td>
                        </tr>
                        <tr>
                            <td style="background-color: #89CFF0"><label for="expirationDate" class="form-label">Expiration Date</label></td>
                            <td style="background-color: #89CFF0"><label for="securityCode" class="form-label">Security Code</label></td>
                            <td style="background-color: #89CFF0"><label for="postalCode" class="form-label">Postal Code</label></td>
                        </tr>
                        <tr>
                            <td>
                                <input style="display:none" type="month" name="pleaseWork">
                                <input field="*{expirationDate}" name="expirationDate" class="form-control date-picker" autocomplete="do-not-autofill"/> 
                                <script type="text/javascript"> 
                                    <!--used for learning how to use jQuery to get month and year since input type="month" doesn't work on firefox https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only -->
                                          $(function() {
                                              $('.date-picker').datepicker( {
                                              changeMonth: true,
                                              changeYear: true,
                                              showButtonPanel: true,
                                              dateFormat: 'M yy',
                                              onClose: function(dateText, inst) { 
                                                  $(this).datepicker('setDate', new Date(inst.selectedYear, inst.selectedMonth, 1));
                                              }
                                              });
                                          });
                                      
                                </script>
                                <!--<p th:if="${#fields.hasErrors('expirationDate')}" th:errors="*{expirationDate}"></p>-->
                                <p th:if="${cardError}" th:text="${cardError}"></p>
                            </td>
                            <td>
                                <input type="text" class="form-control" id="securityCode" field="*{securityCode}" name="securityCode"></input>
                                <p th:text="${securityCodeErr}" th:if="${securityCodeErr != null}"></p>
                            </td>
                            <td>
                                <input type="number" class="form-control" id="postalCode" field="*{postalCode}" name="postalCode"></input>
                                <p th:text="${postalCodeErr}" th:if="${postalCodeErr != null}"></p>
                            </td>
                        </tr>
                        <!-- <button type="button" class="btn btn-lg btn-danger" disabled
                            th:if="${currUser.directDepositDetails == null}">No Deposit Details Added</button></div> -->
                    </tbody>
                </table>
                <!-- Purchase decisions -->
                <div class="d-flex justify-content-center mb-3">
                    <button style="margin-right:50px;" class="btn btn-danger btn-lg" type="submit" name="cancel">Cancel</button>
                    <button style="margin-left:50px;" class="btn btn-primary btn-lg"
                        type="submit" name="submit">Confirm</button>
                </div>
            </div>
            </div>
        </form>
        <!-- submit and back button -->
        <div class="d-flex mb-3 mt-3" style="float:right; padding-right: 45px"> 
            <a class="btn btn-outline-danger ms-1" style="margin-right: 10px" th:href="@{/index}"><span>Back</span></a>
            <input id="mysignupbutton" class="btn btn-outline-success me-1" type="submit" value="Submit">
        </div>
        </form>
        <script>
            function myFunction() {           
              document.getElementById('mysignupbutton').setAttribute('disabled', 'disabled');
            }
        </script>
        </div>
        </th:block>
    </body>
</html>